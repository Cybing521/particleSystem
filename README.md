# Hand Gesture Particle System

一个基于 Web 的交互式粒子系统，使用手势识别技术实现实时控制和交互。通过 MediaPipe 手部追踪和 Three.js 3D 渲染，将手部动作转化为动态的粒子视觉效果。

## ✨ 功能特性

### 🎨 粒子形状
- **Sphere（球体）**: 球形分布的粒子
- **Cube（立方体）**: 立方体形状的粒子排列
- **Torus（圆环）**: 圆环形状的粒子分布
- **Cloud（云朵）**: 随机分布的粒子云
- **自定义模型**: 支持上传 `.glb` 或 `.gltf` 格式的 3D 模型

### 🤲 手势控制

#### 角色分工（镜像预览下也保持一致）
- **左手：旋转/倾斜**  
  - 左右/上下移动 → 控制 Y/X 轴旋转  
  - 左右/前后倾斜 → 控制 Z 轴及俯仰
- **右手：形状/缩放**  
  - 手指计数切换形状：1 指球体、2 指心形、3 指圆环  
  - 拇指食指捏合缩小，张开放大
- **单手模式**：仅左手=只旋转/倾斜，不触发缩放/形状；仅右手=只形状/缩放，不改变旋转。

#### 识别与稳定性
- 使用 MediaPipe handedness 结果识别左右手，若模型未给出再按画面左右位置兜底。
- 摄像头预览可能镜像，但 handedness 仍按真实左右判定。
- 手指计数和捏合带平滑处理，减少抖动和误触。

### 🎨 视觉特效
- **呼吸效果**: 粒子大小随时间产生微妙的呼吸动画
- **平滑过渡**: 所有形状变化和旋转都采用平滑插值
- **雾化效果**: 白色雾化效果增强空间深度感
- **颜色自定义**: 支持通过颜色选择器自定义粒子颜色

### 💻 用户界面
- 现代化的 UI 设计，支持毛玻璃效果
- 形状选择按钮
- 颜色选择器
- 自定义模型上传
- 全屏模式支持

## 🚀 快速开始

### 环境要求
- Node.js 16+ 
- 现代浏览器（支持 WebGL 和 WebRTC）
- 摄像头设备（用于手势识别）

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd particleSystems
```

2. **安装依赖**
```bash
npm install
```

3. **启动开发服务器**
```bash
npm run dev
```

4. **访问应用**
   - 打开浏览器访问 `http://localhost:5173`
   - 允许浏览器访问摄像头权限
   - 开始使用手势控制粒子系统！

### 构建生产版本

```bash
npm run build
```

构建后的文件将输出到 `dist` 目录。

### 预览生产版本

```bash
npm run preview
```

## 📖 使用指南

### 基本操作

1. **允许摄像头访问**: 首次使用时，浏览器会请求摄像头权限，请点击"允许"

2. **手势控制**:
   - 将手放在摄像头前
   - 通过捏合/张开控制粒子大小
   - 移动手部位置控制旋转
   - 倾斜手部控制 Z 轴旋转
   - 伸出不同数量的手指切换形状

3. **UI 控制**:
   - 点击左下角的形状按钮切换粒子形状
   - 使用颜色选择器更改粒子颜色
   - 上传 `.glb` 或 `.gltf` 文件加载自定义模型
   - 点击全屏按钮进入全屏模式

### 手势技巧

- **平滑控制**: 缓慢移动手部可以获得更平滑的动画效果
- **稳定识别**: 保持手部在摄像头视野中心，确保良好的识别效果
- **光线条件**: 在光线充足的环境下使用，可以提高识别准确度

## 🏗️ 项目结构

```
particleSystems/
├── index.html              # 主 HTML 文件
├── package.json            # 项目配置和依赖
├── src/
│   ├── main.js            # 应用入口，场景初始化
│   ├── style.css          # 样式文件
│   ├── input/
│   │   ├── HandTracker.js           # 手势追踪主类
│   │   └── hand-tracker.worker.js   # Web Worker 手势检测
│   ├── scene/
│   │   └── ParticleSystem.js        # 粒子系统核心逻辑
│   └── ui/
│       └── UIManager.js              # UI 管理
└── public/                # 静态资源
```

## 🔧 技术栈

- **Three.js**: 3D 图形渲染引擎
- **MediaPipe**: Google 的手部追踪解决方案
- **Vite**: 现代化的前端构建工具
- **Web Workers**: 后台处理手势识别，避免阻塞主线程

## 📝 核心模块说明

### HandTracker
负责初始化摄像头、与 Web Worker 通信、处理手势识别结果。

### ParticleSystem
管理粒子的创建、更新、形状变换、颜色设置和模型加载。

### UIManager
处理用户界面的创建和事件绑定。

## 🎯 未来计划

- [ ] 支持双手识别
- [ ] 更多手势类型（挥手、抓取等）
- [ ] 粒子物理效果（重力、碰撞）
- [ ] 音频可视化集成
- [ ] 更多预设形状和效果
- [ ] 手势录制和回放功能

## 📄 许可证

查看 [LICENSE](LICENSE) 文件了解详情。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📧 联系方式

如有问题或建议，请通过 Issue 联系。

---

**享受手势控制的粒子世界！** ✨
